<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>长安二十四计 - StreamLab</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Microsoft YaHei', sans-serif; background: #0a0a0f; color: #fff; min-height: 100vh; }
        .header { background: linear-gradient(135deg, #1a1a2e, #16213e); padding: 15px 20px; display: flex; align-items: center; justify-content: space-between; }
        .title { font-size: 22px; background: linear-gradient(135deg, #ff6b6b, #feca57); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .main { display: flex; max-width: 1400px; margin: 0 auto; padding: 20px; gap: 20px; }
        .player-area { flex: 1; }
        .video-container { position: relative; width: 100%; background: #000; border-radius: 12px; overflow: hidden; }
        video { width: 100%; display: block; }
        .info { margin-top: 15px; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 10px; }
        .info h2 { font-size: 18px; margin-bottom: 8px; }
        .info p { color: #888; font-size: 13px; line-height: 1.6; }
        .sidebar { width: 300px; }
        .panel { background: rgba(255,255,255,0.05); border-radius: 10px; padding: 15px; }
        .panel-title { font-size: 14px; color: #888; margin-bottom: 12px; padding-bottom: 10px; border-bottom: 1px solid #222; }
        .episodes { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; }
        .ep-btn { padding: 12px 5px; background: #1a1a2e; border: 1px solid #333; border-radius: 6px; color: #fff; font-size: 13px; cursor: pointer; transition: all 0.2s; }
        .ep-btn:hover { border-color: #ff6b6b; background: #2a2040; }
        .ep-btn.active { background: linear-gradient(135deg, #ff6b6b, #feca57); color: #000; border: none; font-weight: bold; }
        .status { text-align: center; padding: 20px; color: #feca57; }
        .loading { display: inline-block; width: 20px; height: 20px; border: 2px solid #333; border-top-color: #feca57; border-radius: 50%; animation: spin 1s linear infinite; margin-right: 10px; vertical-align: middle; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .quality { display: flex; gap: 8px; margin-top: 10px; }
        .quality span { padding: 4px 12px; background: #ff6b6b; color: #fff; border-radius: 4px; font-size: 12px; font-weight: bold; }
        .nav-links { display: flex; gap: 15px; }
        .nav-links a { color: #888; text-decoration: none; }
        .nav-links a:hover { color: #fff; }
    </style>
</head>
<body>
    <div class="header">
        <div class="title">StreamLab - 长安二十四计</div>
        <div class="nav-links">
            <a href="/changan">长安十二时辰</a>
            <a href="/">首页</a>
        </div>
    </div>
    
    <div class="main">
        <div class="player-area">
            <div class="video-container">
                <video id="video" controls></video>
            </div>
            <div class="status" id="status"><span class="loading"></span>正在加载...</div>
            <div class="info">
                <h2>长安二十四计 <span id="currentEp">第1集</span></h2>
                <p>讲述唐朝诡谲风云中的智谋较量，精彩纷呈的权谋故事。</p>
                <div class="quality"><span>1080P</span><span>m3u8</span><span>28集全</span></div>
            </div>
        </div>
        
        <div class="sidebar">
            <div class="panel">
                <div class="panel-title">选集播放 (共28集)</div>
                <div class="episodes" id="episodes"></div>
            </div>
        </div>
    </div>
    
    <script>
        const episodes = [
            {name: '第1集', url: 'https://hn.bfvvs.com/play/bYEpgGWb/index.m3u8'},
            {name: '第2集', url: 'https://hn.bfvvs.com/play/bo2RxQKa/index.m3u8'},
            {name: '第3集', url: 'https://hn.bfvvs.com/play/egJYmL6d/index.m3u8'},
            {name: '第4集', url: 'https://hn.bfvvs.com/play/axkqKvre/index.m3u8'},
            {name: '第5集', url: 'https://hn.bfvvs.com/play/axkqJv3e/index.m3u8'},
            {name: '第6集', url: 'https://hn.bfvvs.com/play/eEROn9Ya/index.m3u8'},
            {name: '第7集', url: 'https://hn.bfvvs.com/play/av2qEnVa/index.m3u8'},
            {name: '第8集', url: 'https://hn.bfvvs.com/play/dBBowrQd/index.m3u8'},
            {name: '第9集', url: 'https://hn.bfvvs.com/play/av2qPXVa/index.m3u8'},
            {name: '第10集', url: 'https://hn.bfvvs.com/play/dBBowKxd/index.m3u8'},
            {name: '第11集', url: 'https://hn.bfvvs.com/play/aKrXPZne/index.m3u8'},
            {name: '第12集', url: 'https://hn.bfvvs.com/play/aQWJY0Yd/index.m3u8'},
            {name: '第13集', url: 'https://hn.bfvvs.com/play/aKrX01Ye/index.m3u8'},
            {name: '第14集', url: 'https://hn.bfvvs.com/play/eZ6O3YRe/index.m3u8'},
            {name: '第15集', url: 'https://hn.bfvvs.com/play/epYwG3Va/index.m3u8'},
            {name: '第16集', url: 'https://hn.bfvvs.com/play/ejRQy3Pe/index.m3u8'},
            {name: '第17集', url: 'https://hn.bfvvs.com/play/en5QMppd/index.m3u8'},
            {name: '第18集', url: 'https://hn.bfvvs.com/play/dwp9YBXe/index.m3u8'},
            {name: '第19集', url: 'https://hn.bfvvs.com/play/eVOOprOa/index.m3u8'},
            {name: '第20集', url: 'https://hn.bfvvs.com/play/elYYQLVa/index.m3u8'},
            {name: '第21集', url: 'https://hn.bfvvs.com/play/elYYORVa/index.m3u8'},
            {name: '第22集', url: 'https://hn.bfvvs.com/play/dG66RQ7b/index.m3u8'},
            {name: '第23集', url: 'https://hn.bfvvs.com/play/ejRR0WYe/index.m3u8'},
            {name: '第24集', url: 'https://hn.bfvvs.com/play/epYYkjra/index.m3u8'},
            {name: '第25集', url: 'https://hn.bfvvs.com/play/bDkk8zKa/index.m3u8'},
            {name: '第26集', url: 'https://hn.bfvvs.com/play/b6880zQe/index.m3u8'},
            {name: '第27集', url: 'https://hn.bfvvs.com/play/ejRRnOze/index.m3u8'},
            {name: '第28集', url: 'https://hn.bfvvs.com/play/epYYzXra/index.m3u8'},
        ];
        
        let currentEp = 0;
        let hls = null;
        const video = document.getElementById('video');
        const status = document.getElementById('status');
        
        function renderEpisodes() {
            document.getElementById('episodes').innerHTML = episodes.map((ep, i) => 
                `<button class="ep-btn ${i === currentEp ? 'active' : ''}" onclick="playEp(${i})">${i + 1}</button>`
            ).join('');
        }
        
        function playEp(index) {
            currentEp = index;
            renderEpisodes();
            document.getElementById('currentEp').textContent = episodes[index].name;
            loadVideo(episodes[index].url);
        }
        
        function loadVideo(url) {
            status.innerHTML = '<span class="loading"></span>正在加载...';
            status.style.display = 'block';
            
            if (hls) hls.destroy();
            
            if (Hls.isSupported()) {
                hls = new Hls({ maxBufferLength: 30, maxMaxBufferLength: 60 });
                hls.loadSource(url);
                hls.attachMedia(video);
                hls.on(Hls.Events.MANIFEST_PARSED, () => {
                    status.innerHTML = '✓ 加载成功';
                    status.style.color = '#4caf50';
                    video.play().catch(() => {});
                });
                hls.on(Hls.Events.ERROR, (e, data) => {
                    if (data.fatal) {
                        status.innerHTML = '✗ 加载失败';
                        status.style.color = '#f44336';
                    }
                });
            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                video.src = url;
                video.play();
            }
        }
        
        video.addEventListener('playing', () => { status.style.display = 'none'; });
        
        renderEpisodes();
        playEp(0);
    </script>
</body>
</html>

