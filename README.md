# 🎬 B站视频播放器

一个基于 Flask + Canvas 的 B站视频播放器，支持高清播放和弹幕渲染。

## ✨ 功能特性

- 🎥 **高清视频播放** - 支持最高 1080P 画质
- 💬 **实时弹幕渲染** - Canvas 高性能弹幕引擎
- 🎨 **弹幕自定义** - 透明度、速度、大小、区域可调
- 📱 **响应式设计** - 适配各种屏幕尺寸
- 🌙 **深色/浅色主题** - 一键切换
- ⌨️ **快捷键支持** - 空格播放/暂停，方向键快进/音量

## 🚀 快速开始

### 方式一：双击运行 (Windows)

直接双击 `start.bat` 文件即可启动。

### 方式二：命令行启动

```bash
# 安装依赖
pip install -r requirements.txt

# 启动服务器
python server.py
```

然后访问 http://localhost:5000

## 📖 使用说明

1. 在搜索框输入 B站视频链接或 BV 号
2. 点击"解析播放"按钮
3. 等待视频加载完成即可观看

**支持的输入格式：**
- BV号: `BV1xx411c7mD`
- 完整链接: `https://www.bilibili.com/video/BV1xx411c7mD`

## ⌨️ 快捷键

| 按键 | 功能 |
|------|------|
| `空格` | 播放/暂停 |
| `←` / `→` | 快退/快进 5秒 |
| `↑` / `↓` | 增加/减少音量 |
| `F` | 全屏切换 |
| `M` | 静音切换 |
| `D` | 弹幕开关 |

## 🛠️ 技术栈

- **后端**: Flask + Requests
- **前端**: 原生 JavaScript + Canvas
- **弹幕**: 自研高性能弹幕引擎
- **样式**: CSS3 + 玻璃拟态设计

## 📁 项目结构

```
shoujishipin/
├── server.py           # Flask 后端服务
├── requirements.txt    # Python 依赖
├── start.bat          # Windows 启动脚本
├── templates/
│   └── index.html     # 主页面
└── static/
    ├── css/
    │   └── style.css  # 样式文件
    └── js/
        ├── danmaku.js # 弹幕引擎
        └── player.js  # 播放器控制
```

## ⚠️ 注意事项

- 本项目仅供学习研究使用
- 部分视频可能需要登录才能获取高清画质
- 请遵守 B站用户协议和相关法律法规

## 📝 技术原理

### 视频获取流程
1. 通过 B站 API 获取视频信息和 CID
2. 使用 WBI 签名获取视频播放地址
3. 通过本地代理解决跨域和防盗链问题

### 弹幕渲染原理
1. 从 B站弹幕 API 获取 XML 格式弹幕
2. 解析弹幕数据（时间、类型、颜色、内容）
3. 使用 Canvas 2D 按时间轴渲染弹幕
4. 轨道分配算法避免弹幕重叠

## 📄 License

MIT License - 仅供学习研究

